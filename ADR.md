# Architectural Decision Records

## Архитектура веб-приоложения

Приложение я начал писать на PHP. Выбор языка обусловен моими способностями в программировании веба - нет опыта. 

На данный момент создано простенькое READ-only приложение. При написании использованы PDO Prepared Statements, попытался разделить на model-view. Никаких PHP фреймворков не используется, Composer (пока) тоже не используется.

Скрейпер API я скорее всего напишу в виде отдельного скрипта. Я рассматриваю парсинг как long-running task, и её очень не хочется встраивать в само веб-приложение. Поэтому отдельный скрипт, скорее всего на Python (requests). Наверное скрипт можно написать и на PHP, но для этой задачи Python мне кажется более подходящим. 

Запуск скрипта (задания по парсингу) - в идеале через очередь сообщений типа RabbitMQ. Но программа минимум - по cron раз в 30 секунд проверять наличие задания в БД и стартовать. 

Программа максимум:
- использовать RabbitMQ, пушить задания в MQ из PHP, надо будет использовать Composer
- переписать веб с PHP на Flask 

Не факт что на программу максимум у меня хватит времени, поэтому пока PHP + запланирован парсер на Python. 

## Архитектура инфраструктуры

*[DRAFT]* 

1. DB - RDS или unmanaged MySQL (надо выяснить)
1. CI - пока неясно что использовать (Jenkins или AWS сервисы?)
1. Quality Gate - вероятно SonarQube, вероятно придётся разворачивать в кубере
1. IaC Provisioning - Terraform Cloud или Terraform+S3
1. Orchestration - вероятно Ansible, если он понадобится
1. Logging - пока неясно что использовать (Loki или Graylog или CloudWatch?)
1. Monitoring - пока неясно что использовать (Datadog или Prometheus или CloudWatch?)
1. Scalability/redundancy - Amazon EKS
